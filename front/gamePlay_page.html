<!DOCTYPE html>
<html>
    <head>
        <style>
            body {
                margin: 0px;
                font-family: "Segoe UI", sans-serif;
            }
            
            /* a 태그의 스타일을 하얀색에 밑줄이 없도록 변경 */
            
            a:link, a:visited, a:hover, a:active {
                color: white;
                text-decoration: none;
            }
            
            button {
                border: 0px;
                padding: 0px;
                background-color: #B4DDFB;
            }
            
            /*
            
            flex의 구조
            
            flex {
                left {
                    select
                }

                right {
                    turn-time {
                        turn
                        time
                    }
                }
            }
                
            */
            
            /* 제일 큰 태그 flex, 좌우 방향의 flex */
            
            #flex {
                display: flex;
                flex-direction: row;
                
                height: 100%;
            }
            
            /* game-play와 select 레이아웃을 포함한 left-layout, 상하 방향의 flex */
            
            #left-layout {
                display: flex;
                flex-direction: column;
                width: 1440px;
            }
            
            /* turn-text와 tips 레이아웃을 포함한 right-layout, 상하 방향의 flex */
            
            #right-layout {
                display: flex;
                flex-direction: column;
                width: 400px;
            }
            
             /* 실제 맵이 존재하고 게임 말이 움직이는 공간 */
            
            #game-play-layout {
                position: relative;
                width: 1440px;
                height: 768px;
            }
            
            #map {
                display: flex;
                flex-direction: column;
                
                position: relative;
                z-index: 20;
                
                margin-left: 108px;
                margin-top: 28px;
            }
            
            .row {
                display: flex;
                flex-direction: row; 
            }
            
            .square {
                margin: 5px;
                background-color: white;
                border: 1px solid black;
                width: 90px;
                height: 90px;
            }
            
            /* menu, move, use terrain, item을 포함한 select-layout, 좌우 방항의 flex */
            
            #select-layout {
                display: flex;
                flex-direction: row;
                background-color: #B4DDFB;
                height: 200px;
            }
            
            /* title, turn, time을 포함한 turn-time-layout, 상하 방향의 flex */
            
            #turn-time-layout {
                display: flex;
                flex-direction: column;
                
                background-color: #A4D6FA;
                
                height: 700px;
            }
            
            /* current-turn과 max-turn을 포함한 turn-layout, 좌우 방향의 flex */
            
            #turn-layout {
                display: flex;
                flex-direction: row;
            }
            
            /* remaining-time과 sec을 포함한 time-layout, 좌우 방향의 flex */
            
            #time-layout {
                display: flex;
                flex-direction: row;
            }
            
            #tips-layout {
                background-color: #87C9F9;
                
                height: 268px;
            }
            
            /* text */
            
            /* left */
            
            #menu-text {
                font-size: 80px;
                color: white;
                margin-top: 50px;
                margin-bottom: 50px;
                margin-left: 50px;
            }
            
            #move-text {
                font-size: 80px;
                color: white;
                margin-top: 50px;
                margin-bottom: 50px;
                margin-left: 60px;
            }
            
            #use-terrain-text {
                font-size: 50px;
                font-weight: lighter;
                text-align: center;
                color: white;
                margin-top: 20px;
                margin-bottom: 20px;
                margin-left: 60px;
                
                padding-top: 20px;
                padding-bottom: 20px;
                padding-right: 60px;
                border-right: 1px solid white;
            }
            
            #item-text {
                font-size: 50px;
                font-weight: lighter;
                color: white;
                margin-top: 12px;
                margin-left: 20px;
            }
            
            /* right */
            
            #title-text {
                font-size: 80px;
                font-weight: lighter;
                text-align: center;
                color: #44282E;
                margin-bottom: 20px;
            }
            
            #turn-text {
                font-size: 80px;
                font-weight: lighter;
                margin-left: 20px;
                color: white;
            }
            
            #current-turn-text {
                font-size: 200px;
                margin-left: 160px;
                margin-top: -60px;
                color: white;
            }
            
            #max-turn-text {
                font-size: 50px;
                margin-left: -30px;
                margin-top: 120px;
                color: white;
            }
            
            #time-text {
                font-size: 80px;
                font-weight: lighter;
                margin-left: 20px;
                color: white;
            }
            
            #remaining-time-text {
                font-size: 200px;
                margin-left: 90px;
                margin-top: -60px;
                color: white;
            }
            
            #sec-text {
                font-size: 50px;
                font-weight: lighter;
                margin-top: 100px;
                color: white;
            }
            
            #tips-text {
                font-size: 50px;
                font-weight: lighter;
                margin-left: 20px;
                color: white;
            }
            
            #tips-tip-text {
                font-size: 25px;
                font-weight: lighter;
                margin-left: 20px;
                color: #44282E;
            }
        </style>
    </head>
    <body>
        <div id="flex">
            <div id="left-layout">
                <div id="game-play-layout">
                    <img src="TileBack_LeftBottom.png" id="sample" style="position:absolute; left:0px; bottom:0; width:512px; height:512px; z-index:10;">
                    <img src="TileBack_RightTop.png" style="position:absolute; right:0px; top:0; width:512px; height:512px; z-index:10;">
                    
                    <div id="map">
                        <div class="row" id="row1">
                            <div class="square" id="sqr1x1"></div>
                            <div class="square" id="sqr1x2"></div>
                            <div class="square" id="sqr1x3"></div>
                            <div class="square" id="sqr1x4"></div>
                            <div class="square" id="sqr1x5"></div>
                            <div class="square" id="sqr1x6"></div>
                            <div class="square" id="sqr1x7"></div>
                            <div class="square" id="sqr1x8"></div>
                            <div class="square" id="sqr1x9"></div>
                            <div class="square" id="sqr1x10"></div>
                            <div class="square" id="sqr1x11"></div>
                            <div class="square" id="sqr1x12"></div>
                        </div>
                        <div class="row" id="row2">
                            <div class="square" id="sqr2x1"></div>
                            <div class="square" id="sqr2x2"></div>
                            <div class="square" id="sqr2x3"></div>
                            <div class="square" id="sqr2x4"></div>
                            <div class="square" id="sqr2x5"></div>
                            <div class="square" id="sqr2x6"></div>
                            <div class="square" id="sqr2x7"></div>
                            <div class="square" id="sqr2x8"></div>
                            <div class="square" id="sqr2x9"></div>
                            <div class="square" id="sqr2x10"></div>
                            <div class="square" id="sqr2x11"></div>
                            <div class="square" id="sqr2x12"></div>
                        </div>
                        <div class="row" id="row3">
                            <div class="square" id="sqr3x1"></div>
                            <div class="square" id="sqr3x2"></div>
                            <div class="square" id="sqr3x3"></div>
                            <div class="square" id="sqr3x4"></div>
                            <div class="square" id="sqr3x5"></div>
                            <div class="square" id="sqr3x6"></div>
                            <div class="square" id="sqr3x7"></div>
                            <div class="square" id="sqr3x8"></div>
                            <div class="square" id="sqr3x9"></div>
                            <div class="square" id="sqr3x10"></div>
                            <div class="square" id="sqr3x11"></div>
                            <div class="square" id="sqr3x12"></div>
                        </div>
                        <div class="row" id="row4">
                            <div class="square" id="sqr4x1"></div>
                            <div class="square" id="sqr4x2"></div>
                            <div class="square" id="sqr4x3"></div>
                            <div class="square" id="sqr4x4"></div>
                            <div class="square" id="sqr4x5"></div>
                            <div class="square" id="sqr4x6"></div>
                            <div class="square" id="sqr4x7"></div>
                            <div class="square" id="sqr4x8"></div>
                            <div class="square" id="sqr4x9"></div>
                            <div class="square" id="sqr4x10"></div>
                            <div class="square" id="sqr4x11"></div>
                            <div class="square" id="sqr4x12"></div>
                        </div>
                        <div class="row" id="row5">
                            <div class="square" id="sqr5x1"></div>
                            <div class="square" id="sqr5x2"></div>
                            <div class="square" id="sqr5x3"></div>
                            <div class="square" id="sqr5x4"></div>
                            <div class="square" id="sqr5x5"></div>
                            <div class="square" id="sqr5x6"></div>
                            <div class="square" id="sqr5x7"></div>
                            <div class="square" id="sqr5x8"></div>
                            <div class="square" id="sqr5x9"></div>
                            <div class="square" id="sqr5x10"></div>
                            <div class="square" id="sqr5x11"></div>
                            <div class="square" id="sqr5x12"></div>
                        </div>    
                        <div class="row" id="row6">
                            <div class="square" id="sqr6x1"></div>
                            <div class="square" id="sqr6x2"></div>
                            <div class="square" id="sqr6x3"></div>
                            <div class="square" id="sqr6x4"></div>
                            <div class="square" id="sqr6x5"></div>
                            <div class="square" id="sqr6x6"></div>
                            <div class="square" id="sqr6x7"></div>
                            <div class="square" id="sqr6x8"></div>
                            <div class="square" id="sqr6x9"></div>
                            <div class="square" id="sqr6x10"></div>
                            <div class="square" id="sqr6x11"></div>
                            <div class="square" id="sqr6x12"></div>  
                        </div>    
                        <div class="row" id="row7">
                            <div class="square" id="sqr7x1"></div>
                            <div class="square" id="sqr7x2"></div>
                            <div class="square" id="sqr7x3"></div>
                            <div class="square" id="sqr7x4"></div>
                            <div class="square" id="sqr7x5"></div>
                            <div class="square" id="sqr7x6"></div>
                            <div class="square" id="sqr7x7"></div>
                            <div class="square" id="sqr7x8"></div>
                            <div class="square" id="sqr7x9"></div>
                            <div class="square" id="sqr7x10"></div>
                            <div class="square" id="sqr7x11"></div>
                            <div class="square" id="sqr7x12"></div>
                        </div>    
                    </div>
                    
                </div>
                <div id="select-layout">
                    <div id="menu-text">MENU</div>
                    <div id="move-text">MOVE</div>
                    <div id="use-terrain-text">USE<br>TERRAIN</div>
                    <div id="item-text">Item</div>
                    <button type="button" id="item1" style="width:160px; height:160px; margin-top:20px; margin-left:60px;">
                        <img src="White_Circle.png" style="width:160px; height:160px;">
                    </button>
                    <button type="button" id="item2" style="width:160px; height:160px; margin-top:20px; margin-left:40px;">
                        <img src="White_Circle.png" style="width:160px; height:160px;">
                    </button>
                </div>
            </div>
            <div id="right-layout">
                <div id="turn-time-layout">
                    <div id="title-text">DisasterTile</div>
                    <div id="turn-text">Turn</div>
                    <div id="turn-layout">
                        <div id="current-turn-text">1/</div>
                        <div id="max-turn-text">30</div>
                    </div>
                    <div id="time-text">Time</div>
                    <div id="time-layout">
                        <div id="remaining-time-text">30</div>
                        <div id="sec-text">sec</div>
                    </div>
                </div>
                <div id="tips-layout">
                    <div id="tips-text">TIPS!</div>
                    <div id="tips-tip-text">You just don't do anything I would do... and definitely don't do anything I wouldn't do. There's a little gray area in there and that's where you operate.</div>
                </div>
            </div>
        </div>
        
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <script>
            // 이번 턴이 끝나끼까지 남은 시간을 알려주는 변수
            var currentSec = 30;
            // 현재 턴이 몇 번째인지를 담는 변수
            var currentTurn = 1;
            // 배열 tips의 index를 담는 변수
            var tipsIndex = 1;
            
            // 테스트용 배열
            // tip들을 모아놓은 배열
            var tips = new Array(10);
            tips[0] = "So, to become an Avenger, are there like trials or an interview?";
            tips[1] = "You just don't do anything I would do... and definitely don't do anything I wouldn't do. There's a little gray area in there and that's where you operate.";
            tips[2] = "That's not a hug. I'm just grabbing the door for you.";
            tips[3] = "But you are a kid. / Yeah. A kid who can stop a bus with his bare hands."
            tips[4] = "If you're nothing without the suit, then you shouldn't have it.";
            tips[5] = "Wait a minute... You guys aren't the real Avengers! I can tell Hulk gives it away.";
            tips[6] = "Can't you just be a friendly neighborhood Spider-Man?";
            tips[7] = "Can you summon an army of spiders? / No, man!";
            tips[8] = "What are you hiding Peter? [laughs] I'm just kidding. I don't care. Bye.";
            tips[9] = "Spider-Man is not a party trick!";
            
            // 1초마다 실행
            setInterval(function() {
                if(currentSec > -2) currentSec--;
                if(currentSec < 10) $("#remaining-time-text").css("margin-left", "198px");
                if(currentSec >= 0) $("#remaining-time-text").text(currentSec);
                if(currentSec == -1) endTurn();
                else {}
            }, 1000)
            
            // 각 턴이 끝날 때 실행되는 메서드
            function endTurn() {
                alert("Time Out");
                
                if(currentTurn < 30) startTurn();
            }
            
            // 각 턴이 시작될 때 실행되는 메서드
            function startTurn() {
                
                // 턴 시작 알람
                alert("Turn Start");
                
                // 아이템 정보 갱신
                
                // 팁 갱신
                writeNewTip();
                
                // 현재 턴 갱신
                currentTurn++;
                if(currentTurn >= 10) $("#current-turn-text").css("margin-left", "52px");
                $("#current-turn-text").text(currentTurn + "/");
                
                // 남은 시간 갱신
                currentSec = 30;
                $("#remaining-time-text").css("margin-left", "90px");
                $("#remaining-time-text").text(currentSec);
            }
            
            // 팁을 갱신하는 메서드
            function writeNewTip() {
                var randomNum;
                
                do {
                    randomNum = Math.floor(Math.random() * 10);
                }while(randomNum == tipsIndex);
                
                tipsIndex = randomNum;
                
                $("#tips-tip-text").text(tips[randomNum]);
            }
            
            // player를 그리는 메서드
            // canvasID : player가 그려질 canvas의 ID
            // imageSrc : player 이미지의 경로
            // x : player의 x좌표
            // y : player의 y좌표
            function drawPlayer(canvasID, imageSrc, x, y) {
                var layoutID = "sqr" + y + "x" + x;
                document.getElementById(layoutID).innerHTML = '<canvas id="' + canvasID + '" width="80" height="80" style="margin:4px;"></canvas>';
                
                var playerCanvas = document.getElementById(canvasID);
                var playerCanvasTX = playerCanvas.getContext("2d");
                var playerImage = new Image();
                playerImage.src = imageSrc;
                playerCanvasTX.drawImage(playerImage, 0, 0, 80, 80);
            }
            
            // move 버튼을 눌렀을 때 실행되는 메서드
            // player 주위 상하좌우에 연한 원이 그려짐
            function chooseMoveDirection(player) {
                var playerID = $(player).parent().attr("id");
                var y = parseInt(playerID.charAt(3));
                var x = parseInt(playerID.charAt(5));
                
                if(playerID.length == 7) {
                    x = x + playerID.charAt(6);
                }
                
                if(y != 1 ) drawCircle(x, y, "Top");
                if(x != 12) drawCircle(x, y, "Right");
                if(y != 7 ) drawCircle(x, y, "Bottom");
                if(x != 1 ) drawCircle(x, y, "Left");
            }
            
            // HTML이 load되었을 때 실행
            $(document).ready(function() {
                
                // dummy
                // 이 코드가 없으면 첫 번째 실행한 drawPlayer가 이미지를 그리지 못함
                drawPlayer("player", "Player1.png", 1, 1);
                
                // 첫 번째 item 슬롯을 클릭하면
                $("#item1").click(function() {
                    drawPlayer("player1", "Player1.png", 2, 2);
                });
                
                // 두 번째 item 슬롯을 클릭하면
                $("#item2").click(function() {
                    drawPlayer("player2", "Player1.png", 1, 1);
                });
                
                // move 버튼을 클릭하면
                $("#move-text").click(function() {
                    chooseMoveDirection(player1);
                });
            });
        </script>
    </body>
</html>